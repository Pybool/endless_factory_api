{%  load static %}
{%load translate%}
<header class="header">
    <div class="container">
        <div class="row">
            <div class="col-md-2 logo">
                <a href='/'><img src="{% static 'frontend/images/logo.png' %}" alt=""></a>
            </div>
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-7">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="ef">
                                    <div class="row">
                                        <div class="col-2 bar"><i class="fa fa-bars" aria-hidden="true"></i></div>
                                        <div class="col-8">
                                            <p class="form-control">{{'Endless Factory'|translate:lang}}</p>
                                        </div>
                                        <div class="col-2 dot"><i class="fa fa-ellipsis-v" aria-hidden="true"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 search-area">
                                <form method="GET" class='searchForm' action="/products">
                                    <div class="row">
                                        <div class="col-md-10 area">
                                            <input type="text" placeholder="{{'Search'|translate:lang}}" name="q" value="{% if q is not None %}{{q}}{% endif %}" class="prodSearch emial form-control" required />
                                        </div>
                                        <div class="col-md-2 search">
                                            <button class='btn'><i class="fa fa-search" aria-hidden="true"></i></button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-9 user-log">
                                {% if request.user.is_authenticated %}
                                    <ul>
                                        <li><a href="/users/profile"><i class="fa fa-user" aria-hidden="true"></i> {{request.user.name.split.0}}</a></li>
                                        <li><a href="/user/logout">{{'Log Out'|translate:lang}}</a></li>
                                    </ul>
                                {% else %}
                                    <ul>
                                        <li><a href="/user/register/"><i class="fa fa-user" aria-hidden="true"></i> {{'Sign Up'|translate:lang}}</a></li>
                                        <li><a href="/user/login/">{{'Login'|translate:lang}}</a></li>
                                    </ul>
                                {% endif %}
                            </div>
                            <div class="col-md-3 cart"><h6 style='padding: 8px 7px; margin-bottom: 0.25rem; margin-top: 0.25rem;'><a style='color: black;' href="/cart"><i class="fa fa-shopping-cart" aria-hidden="true"></i> {{'Cart'|translate:lang}}</a></h6></div>
                            <div class="col-md-12 lc">
                                <ul>
                                  <li>
                                    <a class='' id='dropdownMenuButton' data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="#">{{'Language'|translate:lang}}</a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                      <a class="dropdown-item" href="/select-locale?locale=en&current_path={{request.path}}">English</a>
                                      <a class="dropdown-item" href="/select-locale?locale=pu&current_path={{request.path}}">ਪੰਜਾਬੀ</a>
                                      <a class="dropdown-item" href="/select-locale?locale=th&current_path={{request.path}}">ไทย</a>
                                      <a class="dropdown-item" href="/select-locale?locale=ru&current_path={{request.path}}">русский</a>
                                      <a class="dropdown-item" href="/select-locale?locale=es&current_path={{request.path}}">Español</a>
                                      <a class="dropdown-item" href="/select-locale?locale=ar&current_path={{request.path}}">عربي</a>
                                      <a class="dropdown-item" href="/select-locale?locale=ta&current_path={{request.path}}">Pilipino</a>
                                      <a class="dropdown-item" href="/select-locale?locale=vi&current_path={{request.path}}">Tiếng Việt</a>
                                      <a class="dropdown-item" href="/select-locale?locale=fr&current_path={{request.path}}">français</a>
                                      <a class="dropdown-item" href="/select-locale?locale=ba&current_path={{request.path}}">বাংলা</a>
                                      <a class="dropdown-item" href="/select-locale?locale=pr&current_path={{request.path}}">português</a>
                                      <a class="dropdown-item" href="/select-locale?locale=it&current_path={{request.path}}">Italiana</a>
                                      <a class="dropdown-item" href="/select-locale?locale=hi&current_path={{request.path}}">हिंदी</a>
                                    </div>
                                    </li>
                                    <!-- <li><a href="#">{{'Currency'|translate:lang}}</a></li> -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="nav-menu">
                    <div class="navigation-wrap bg-light start-header start-style" style="padding-top: 10px; padding-bottom: 10px;">
                        <div class="container">
                            <div class="row">
                                <div class="col-12">
                                    <nav class="navbar navbar-expand-md navbar-light">
                                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
                                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                        <ul class="navbar-nav">
                                            <li><a href="/" class="active">{{'Home'|translate:lang}}</a></li>
                                            <li><a href="/products" class="active">{{'Products'|translate:lang}}</a></li>
                                            {% for category in categories %}
                                                <li><a href="/products?category={{category.slug}}">{{category.name}}</a></li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
{% for message in messages %}
    {% if message.level_tag == 'success' %}
        <div class='col-12'><p id="message" class="alert alert-success">{{ message }}</p></div>
    {% elif message.level_tag == 'info' %}
        <div class='col-12'><p id="message" class="alert alert-info">{{ message }}</p></div>
    {% elif message.level_tag == 'error' %}
        <div class='col-12'><p id="message" class="alert alert-danger">{{ message }}</p></div>
    {% elif message.level_tag == 'warning' %}
        <div class='col-12'><p id="message" class="alert alert-warning">{{ message }}</p></div>
    {% endif %}
{% endfor %}

<script type='text/javascript'>
    var submitSearchForm = function(){
        var searchQuery = $('input.prodSearch').first().val().trim();
        console.log(searchQuery);
        if(searchQuery != ""){
            $('.searchForm').submit();
        }
        else{
            alert('Please enter search query');
        }
    }
</script>